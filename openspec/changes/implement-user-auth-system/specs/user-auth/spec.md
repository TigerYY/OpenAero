## ADDED Requirements

### Requirement: 用户注册功能
系统必须支持用户通过邮箱进行注册，包括邮箱验证流程。

#### Scenario: 新用户注册成功
- **WHEN** 用户访问注册页面并填写有效邮箱和密码
- **THEN** 系统发送验证邮件到用户邮箱
- **AND** 用户账户状态为"待验证"

#### Scenario: 邮箱验证成功
- **WHEN** 用户点击验证邮件中的链接
- **THEN** 系统验证邮箱并激活用户账户
- **AND** 用户自动登录系统

#### Scenario: 重复邮箱注册
- **WHEN** 用户尝试使用已注册的邮箱进行注册
- **THEN** 系统返回错误提示"该邮箱已被注册"

### Requirement: 用户登录功能
系统必须支持用户通过邮箱和密码进行安全登录。

#### Scenario: 用户登录成功
- **WHEN** 用户输入正确的邮箱和密码
- **THEN** 系统创建会话并返回JWT令牌
- **AND** 用户被重定向到个人主页

#### Scenario: 登录失败处理
- **WHEN** 用户输入错误的密码
- **THEN** 系统返回错误提示"邮箱或密码错误"
- **AND** 记录登录失败次数

#### Scenario: 账户锁定保护
- **WHEN** 用户连续5次登录失败
- **THEN** 系统临时锁定账户15分钟
- **AND** 发送安全提醒邮件给用户

### Requirement: 密码重置功能
系统必须支持用户通过邮箱重置忘记的密码。

#### Scenario: 密码重置请求
- **WHEN** 用户在登录页面点击"忘记密码"
- **THEN** 系统发送密码重置链接到用户邮箱

#### Scenario: 密码重置成功
- **WHEN** 用户通过重置链接设置新密码
- **THEN** 系统更新密码并清除所有活跃会话
- **AND** 发送密码修改确认邮件

### Requirement: 会话管理
系统必须安全地管理用户会话状态。

#### Scenario: 会话自动续期
- **WHEN** 用户在活跃会话期间访问系统
- **THEN** 系统自动延长会话有效期

#### Scenario: 会话超时处理
- **WHEN** 用户会话超过24小时未活动
- **THEN** 系统自动注销用户
- **AND** 要求重新登录

### Requirement: 管理员认证
系统必须支持管理员账户的特殊认证流程。

#### Scenario: 管理员登录
- **WHEN** 管理员使用特殊的管理员登录入口
- **THEN** 系统验证管理员权限
- **AND** 授予管理后台访问权限

#### Scenario: 管理员权限验证
- **WHEN** 管理员尝试访问管理功能
- **THEN** 系统验证管理员角色和权限
- **AND** 记录管理操作日志